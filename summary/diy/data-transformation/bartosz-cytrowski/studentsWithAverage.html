<link rel="stylesheet" href="../../../vendor/qunit.css">

<div id="qunit"></div>
<div id="qunit-fixture"></div>

<script src="../../../vendor/qunit.js"></script>
<script src="../data.js"></script>
<script>
  /**
   * Returns an array with students having average of their notes.
   *
   * @param students
   */
  function getStudentsWithAverage(students) {
    return students.map(function (student) {
      return {
        id: student.id,
        name: student.name,
        avg: student.notes.reduce(function (total, next) {
          return total + next;
        }, 0) / (student.notes.length || 1)
      }
    })
  }
  QUnit.test('Get students with average notes', function (assert) {
    assert.deepEqual(
      getStudentsWithAverage(data.students),
      [
        {
          id: 1,
          name: 'Jacek',
          avg: 4
        },
        {
          id: 2,
          name: 'Ewa',
          avg: 3
        },
        {
          id: 3,
          name: 'Zygmunt',
          avg: 3
        }
      ]
    );
  });
</script>